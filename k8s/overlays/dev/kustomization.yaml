apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: orchestrator-dev

bases:
  - ../../base

namePrefix: dev-

commonLabels:
  environment: dev
  app.kubernetes.io/environment: dev

images:
  - name: orchestrator
    newName: your-registry/orchestrator
    newTag: dev
  - name: probe-agent
    newName: your-registry/probe-agent
    newTag: dev

replicas:
  - name: orchestrator
    count: 1

configMapGenerator:
  - name: orchestrator-config
    behavior: merge
    literals:
      - LOG_LEVEL=debug
      - METRICS_ENABLED=true

patchesStrategicMerge:
  - |-
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: orchestrator
    spec:
      template:
        spec:
          containers:
          - name: orchestrator
            resources:
              requests:
                cpu: 250m
                memory: 256Mi
              limits:
                cpu: 1000m
                memory: 1Gi
